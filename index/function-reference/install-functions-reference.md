# 安装函数参考

软件包管理器提供以下函数来处理各种与安装相关的任务。`${ED}`会自动添加到安装位置。

当给定`do*`函数多个参数时，它们将对多个目标起作用。 `new*`函数恰好带有两个参数（除非另有说明）——第一个是源名称，第二个是安装时使用的名称。

`*into` 函数创建目录，如果它不存在。

| **函数**       | **细节**                                                                                                                                                                                                                                                                             |
| :------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `into`         | 更改 `dobin`，`newbin`， `dosbin`，`newsbin`， `dolib`， `dolib.a`，`newlib.a`， `dolib.so`，`newlib.so`安装位置                                                                                                                                                                     |
| `insinto`      | 更改`doins`安装位置 ，`newins`                                                                                                                                                                                                                                                       |
| `exeinto`      | 更改`doexe`安装位置，`newexe`                                                                                                                                                                                                                                                        |
| `docinto`      | 更改`dodoc`安装位置，`newdoc`                                                                                                                                                                                                                                                        |
| `insopts`      | 指定传递给`install`的参数（例如`-s`，`-m644`）                                                                                                                                                                                                                                       |
| `diropts`      | 指定传递给 `install` 目录的参数                                                                                                                                                                                                                                                      |
| `exeopts`      | 指定传递给 `install` 可执行文件的参数                                                                                                                                                                                                                                                |
| `libopts`      | 指定传递给 `install` 库的参数**注意**：在 EAPI = 7 中被禁止                                                                                                                                                                                                                          |
| `dobin`        | 将二进制文件安装到`/usr/bin`中，将文件模式设置为 0755，并将所有权设置为超级用户或在系统或现有安装上的等效文件。                                                                                                                                                                      |
| `doconfd`      | 安装`/etc/conf.d`文件                                                                                                                                                                                                                                                                |
| `dodir`        | 合并软件包时，请安装一个非空目录。对于将为空的目录，请改用`keepdir` 。                                                                                                                                                                                                               |
| `dodoc`        | 将文档文件安装到`/usr/share/doc/${PF}`。`-r`选项允许递归安装目录。                                                                                                                                                                                                                   |
| `einstalldocs` | 使用`dodoc -r`将`DOCS`和`HTML_DOCS`变量指定的文件和目录安装到`/usr/share/doc/${PF}`中。注意：已在 EAPI 6 中批准。                                                                                                                                                                    |
| `doenvd`       | 安装`/etc/env.d`文件                                                                                                                                                                                                                                                                 |
| `doexe`        | 将可执行文件安装到`exeinto`所提供的位置 ，默认情况下使用模式 0755 或通过 exeopts 设置的安装选项                                                                                                                                                                                      |
| `doheader`     | 将头文件安装到`/usr/include`中。该`-r`选项允许递归安装目录。                                                                                                                                                                                                                         |
| `dohtml`       | 将 HTML 文档文件安装到`/usr/share/doc/${PF}/html`中。 该`-r` 选项允许递归安装目录。 **注意**：在 EAPI 6 中已弃用，改为`einstalldocs`。 **注意**：在 EAPI = 7 中被禁止                                                                                                                |
| `doinfo`       | 安装一个 GNU 信息文档                                                                                                                                                                                                                                                                |
| `doinitd`      | 安装`/etc/init.d` 文件                                                                                                                                                                                                                                                               |
| `doins`        | 安装其他文件。`-r`选项允许递归安装目录。递归安装时，遇到的任何符号链接都将作为符号链接安装。                                                                                                                                                                                         |
| `dolib`        | 安装库文件 **注意**：在 EAPI = 7 中被禁止                                                                                                                                                                                                                                            |
| `dolib.a`      | 安装库（`.a`）文件                                                                                                                                                                                                                                                                   |
| `dolib.so`     | 安装库（共享库）文件                                                                                                                                                                                                                                                                 |
| `doman`        | 将手册页安装到`/usr/share/man`的相应部分。例如，`foo.1` 将安装在`/usr/share/man/man1/foo.1`中。如果手册页已命名为`foo.<lang>.1`， 则它将安装在中`/usr/share/man/<lang>/man1/foo.1`中，其中`<lang>`是语言代码。选项`-i18n=<lang>`可用于显式指定子目录（或禁止显示子目录，如果为空）。 |
| `domo`         | 安装一个 Gettext`.mo`文件。（EAPI = 7）不再看值 `into`                                                                                                                                                                                                                               |
| `dosbin`       | 安装 `sbin/`文件                                                                                                                                                                                                                                                                     |
| `dosym`        | 在第二个参数指定的路径上，创建到指定为第一个参数的目标的符号链接。注意目标是逐字解释的; 它需要指定相对路径或包含`${EPREFIX}`的绝对路径。                                                                                                                                             |
| `fowners`      | 在`${ED}`中的指定文件上调用`chmod`                                                                                                                                                                                                                                                   |
| `fperms`       | 在`${ED}`中的指定文件上调用`chmod`                                                                                                                                                                                                                                                   |
| `keepdir`      | 安装合并软件包时将为空的目1录。就像`dodir`一样，但是用于空目录。[软件包管理器规范未定义对空目录的处理](https://projects.gentoo.org/pms/7/pms.html#x1-14200013.2.2)，并且存在`keepdir`函数以确保跟踪（否则为空）目录。这是通过在相关目录中安装以`.keep`为前缀的隐藏文件来实现的。                                                                |
| `newbin`       | 使用第二个参数作为名称安装二进制文件                                                                                                                                                                                                                                                 |
| `newconfd`     | 使用第二个参数作为名称安装`/etc/conf.d`条目                                                                                                                                                                                                                                          |
| `newdoc`       | 使用第二个参数作为名称安装文档文件                                                                                                                                                                                                                                                   |
| `newenvd`      | 使用第二个参数作为名称 安装`/etc/env.d` 文件                                                                                                                                                                                                                                         |
| `newexe`       | 使用第二个参数作为名称安装可执行文件                                                                                                                                                                                                                                                 |
| `newheader`    | 使用第二个参数作为名称安装头文件                                                                                                                                                                                                                                                     |
| `newinitd`     | 使用第二个参数作为名称安装`/etc/init.d`文件                                                                                                                                                                                                                                          |
| `newins`       | 使用第二个参数作为名称安装其他文件                                                                                                                                                                                                                                                   |
| `newlib.a`     | 使用第二个参数作为名称安装`.a`库文件                                                                                                                                                                                                                                                 |
| `newlib.so`    | 使用第二个参数作为名称安装`.so`库文件                                                                                                                                                                                                                                                |
| `newman`       | 使用第二个参数作为名称安装手册页                                                                                                                                                                                                                                                     |
| `newsbin`      | 使用第二个参数作为名称安装`sbin`文件                                                                                                                                                                                                                                                 |
| `docompress`   | 控制文件的压缩。通常执行以排除压缩，例如 `docompress -x /usr/share/doc/${PF}/examples`。                                                                                                                                                                                             |
| `dostrip`      | 与 EAPI=7 一起引入，用于控制可执行文件的剥离。通常执行以排除剥离。例如。`dostrip -x /path/to/important.so`。`RESTRICT=strip` 不使用`-x` 选项时，也可以用于包含要剥离的二进制文件。                                                                                                   |
